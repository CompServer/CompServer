{% extends 'skeleton.html' %}
{% load i18n %}

{% block title %}{% trans "Competition Page" %}{% endblock %}
{% block content %}
    <header>
        <h1>
            {% if competition.is_judgable %}
                <i class="bi-activity"></i>
            {% elif competition.is_complete %}
                <i class="bi-check2-circle"></i>
            {% elif competition.is_closed %}
                <i class="bi-x-circle"></i>
            {% elif competition.is_in_setup %}
                <i class="bi-gear"></i>
            {% endif %}
            {{ competition }}
        </h1>
    </header>
    <hr>
    {% if competition.tournament_set.all %}
        <h3>{% trans "Tournaments" %}</h3>
        {% for tournament in competition.tournament_set.all %}
            <div class="row d-flex">
                <div class = "col-12">
                    <p>
                        {% if tournament.is_judgable %} 
                            <i class="bi-activity"></i> <a href="{% url 'competitions:single_elimination_tournament' tournament.id %}">{{ tournament.event.name }}</a>
                        {% elif tournament.is_complete %} 
                            <i class="bi-check2-circle"></i> <a href="{% url 'competitions:single_elimination_tournament' tournament.id %}">{{ tournament.event.name }}</a>
                        {% elif tournament.is_closed %} 
                            <i class="bi-x-circle"></i> <a href="{% url 'competitions:single_elimination_tournament' tournament.id %}">{{ tournament.event.name }}</a>
                        {% elif tournament.is_in_setup %}
                            <i class="bi-gear"></i> {{ tournament.event.name }}
                        {% endif %}  
                        ({{ tournament.points|floatformat:"0" }} {% trans "points" %})  
                    </p>
                </div>
            </div>      
        {% endfor %}
    {% endif %}
    {% if competition.teams.exists %}
        <h3>{% trans "Competing Teams" %}</h3>
        {% for team in competition.teams.all %}
            <div class="row d-flex">
                <div class = "col-12">
                    <a href="{% url 'competitions:team' team.id %}">{{ team }}</a>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endblock %}
